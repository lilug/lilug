Setting up a Lilug Skinned Wiki for Fun and Profit
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

This file will explain how to go from the stock version of mediawiki to the
version used by Lilug.  The whole process involves changing the skin to
Lilug's skin and adding a mediawiki plugin that adds some functionality.  This
should be useful for recreating the wiki on the real server if that ever comes
up, as well as doing development on the plugin and the skin.  Here we go.

1. Install Mediawiki
Download and install the stock mediawiki.  Follow mediawiki's instructions for
setting this up.  This part of the process will involve going through the
mediawiki web installer and getting the database set up correctly.  If you're
reinstalling the wiki for the live lilug site, you'll want to be sure to
connect to the existing database so that all of the pages and stuff are brought
over correctly. After completing this step you should be looking at the main
page of mediawiki.

2. Install Lilug's Skin
Drop 'Lilug.php' in to the skins/ directory inside of mediawiki.  This file
defines the HTML that will be generated by the skin.  Now, copy the 'monobook'
directory and name the new directory 'lilug'.  This will contain all of the
supporting files that the lilug skin uses.  Place the graphic files
(lilug_logo.png, lilug_gradient.png) in the 'lilug' directory.  Now, either
apply the patch to the main.css file or just drop lilug's main.css file in to
place.  The patch was included to hopefully make it easier to use a newer
main.css file from mediawiki and still have our changes.  Applying the patch is
probably more correct, but it will have to be kept up to date with changes to
the monobook main.css stylesheet.  The patch should apply by going in to the
'lilug' directory and running 'patch < path/to/main.css.patch'.  All that's
left to do now is to tell mediawiki to use the new skin.  Change the
'$wgDefaultSkin' variable in LocalSettings.php to be 'lilug'.  The wiki should
now look like the lilug wiki.  Tada!

3. Install mediawiki plugin
Drop the 'lilug_ext.php' file in to the extensions/ directory of mediawiki.
Now, just add the following to the LocalSettings.php file to tell mediawiki to
load the extension:

require_once('extensions/lilug_ext.php');

Now, the Lilug specific tags like '<meetingdatetime>' and '<nextmeetingdesc>'
should start working.

4. Make other changes to the LocalSettings.php file:

#disable anonymous page edits, but allow anonymous users to create accounts
$wgGroupPermissions['*'    ]['createaccount']   = true;
$wgGroupPermissions['*'    ]['read']            = true;
$wgGroupPermissions['*'    ]['edit']            = false;

#disable anonymous talk pages (IP talk pages)
$wgDisableAnonTalk = true;

## To enable image uploads, make sure the 'images' directory
## is writable, then uncomment this:
$wgEnableUploads = true;
$wgFileExtensions = array('png', 'gif', 'jpg', 'jpeg', 'ogg', 'sxi', 'sxw', 'odp', 'odt');
$wgUseImageResize = true;
$wgUseImageMagick = true;
$wgImageMagickConvertCommand = "/usr/bin/convert";

5. If you're making this mediawiki installation for the live site, you should
probably copy this README file to somewhere in the mediawiki directory so
if/when someone stumbles over this, they'll know what is going on.

6. Congratulate yourself.
